# API для работы с комментариями

Краткое описание эндпоинтов для управления комментариями к событиям
---

## 1. Публичное API (Public)


### Получение комментариев к событию

-   `GET /events/{eventId}/comments`

    Возвращает список опубликованных (не удаленных) комментариев для указанного события с пагинацией.

    **Параметры запроса (Query Params):**
    -   `from` (int, опционально, по умолчанию `0`) - с какого элемента начать выборку.
    -   `size` (int, опционально, по умолчанию `10`) - количество элементов на странице.

    **Ответ:**
    -   `200 OK` - `List<CommentDto>`

### Получение одного комментария

-   `GET /events/{eventId}/comments/{commentId}`

    Возвращает один опубликованный комментарий по его ID.

    **Ответ:**
    -   `200 OK` - `CommentDto`

---

## 2. Приватное API (для авторизованных пользователей)


### Добавление комментария

-   `POST /users/{userId}/events/{eventId}/comments`

    Создает новый комментарий к событию от имени пользователя.

    **Тело запроса (`NewCommentDto`):**
    ```json
    {
      "text": "Отличное событие, мне очень понравилось!"
    }
    ```

    **Ответ:**
    -   `201 Created` - `CommentDto` (созданный комментарий)

### Редактирование своего комментария

-   `PATCH /users/{userId}/events/{eventId}/comments/{commentId}`

    Позволяет пользователю обновить текст своего комментария.

    **Тело запроса (`UpdateCommentDto`):**
    ```json
    {
      "text": "Исправленный текст моего комментария."
    }
    ```

    **Ответ:**
    -   `200 OK` - `CommentDto` (обновленный комментарий)

### Удаление своего комментария

-   `DELETE /users/{userId}/events/{eventId}/comments/{commentId}`

    Пользователь может удалить свой комментарий (происходит "мягкое" удаление - `soft delete`).

    **Ответ:**
    -   `204 No Content` - Успешное удаление.

---

## 3. Административное API (Admin)

Доступно только для администраторов.

### Поиск комментариев (фильтрация)

-   `GET /admin/comments`

    Возвращает список комментариев с возможностью фильтрации по автору, событию и статусу (включая удаленные).

    **Параметры запроса (Query Params):**
    -   `eventId` (Long, опционально) - ID события.
    -   `authorId` (Long, опционально) - ID автора.
    -   `includeDeleted` (Boolean, опционально, по умолчанию `false`) - включать ли в выборку удаленные комментарии.
    -   `from`, `size` - для пагинации.

    **Ответ:**
    -   `200 OK` - `List<CommentDto>`

### Получение любого комментария по ID

-   `GET /admin/comments/{commentId}`

    Возвращает комментарий по ID, включая удаленные.

    **Ответ:**
    -   `200 OK` - `CommentDto`

### Редактирование комментария (модерация)

-   `PATCH /admin/comments/{commentId}`

    Администратор может отредактировать текст любого комментария.

    **Тело запроса (`UpdateCommentDto`):**
    ```json
    {
      "text": "Исправленный текст комментария."
    }
    ```
    
    **Ответ:**
    -   `200 OK` - `CommentDto` (обновленный комментарий)

### Удаление комментария

-   `DELETE /admin/comments/{commentId}`

    Администратор может удалить любой комментарий ("мягкое" удаление).

    **Ответ:**
    -   `204 No Content`

### Восстановление комментария

-   `PATCH /admin/comments/{commentId}/restore`

    Администратор может восстановить ранее удаленный комментарий.

    **Ответ:**
    -   `204 No Content`